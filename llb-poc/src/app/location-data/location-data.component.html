<div class="row">
	<div class="container" id="map" *ngIf="llbService.isLiveData() && 
	llbService.data[0]?.lat !== 'na' && llbService.data[0]?.lon !== 'na' && llbService.data[0]?.lat !== 'NaN' && llbService.data[0]?.lon !== 'NaN'">
		<agm-map [latitude]="llbService.data[0]?.lat" [longitude]="llbService.data[0]?.lon" 
			[zoom]="15" [mapDraggable]="false" [streetViewControl]="false" [gestureHandling]="none"
			[disableDoubleClickZoom]="true" [scrollwheel] = "false" [keyboardShortcuts] = "false" >
			<agm-marker [latitude]="llbService.data[0]?.lat" [longitude]="llbService.data[0]?.lon" 
			[iconUrl]="'../../assets/img/bus-marker-32.png'" [label]="llbService._vehicleId">
				<agm-info-window [disableAutoPan]="true">
					<ul>
						<li><span>Latitude: {{llbService.data[0]?.lat}}</span></li>
						<li><span>Longitude: {{llbService.data[0]?.lon}}</span></li>
						<li><span>Estimated error: {{llbService.data[0]?.epx}}m</span></li>
					</ul>
				</agm-info-window>
			</agm-marker>
		</agm-map>
	</div>
	
</div>

<div class="row">
	<div class="container">
		<span class="header">Climb rate</span>
		<n-a-chart *ngIf="!llbService.isLiveData() || isNullOrUndefined(llbService.data[0]?.clm) || llbService.data[0]?.alt === 'NaN'"></n-a-chart>
		<app-linechart *ngIf="llbService.isLiveData() && !isNullOrUndefined(llbService.data[0]?.clm)  && llbService.data[0]?.alt !== 'NaN'"
			[data]="llbService.data[0]?.clm">
		</app-linechart>
	</div>
	
	<div class="container">
		<span class="header">Altitude</span>
		<n-a-chart *ngIf="!llbService.isLiveData() || isNullOrUndefined(llbService.data[0]?.alt) || llbService.data[0]?.alt === 'NaN'"></n-a-chart>
		<app-linechart *ngIf="llbService.isLiveData() && !isNullOrUndefined(llbService.data[0]?.alt) && llbService.data[0]?.alt !== 'NaN'"
			[data]="llbService.data[0]?.alt">
		</app-linechart>
	</div>

	<div class="container">
		<ul>
			<li>
				<span>Altitude: </span>
				<span *ngIf="!llbService.isLiveData() || llbService.data[0]?.alt === 'na' || llbService.data[0]?.alt === 'NaN'"><n-a></n-a></span>
				<span *ngIf="llbService.isLiveData() && llbService.data[0]?.alt !== 'na'  && llbService.data[0]?.alt !== 'NaN'">{{llbService.data[0]?.alt}}</span>
			</li>
			<li>
				<span>Estimated vertical error: </span>
				<span *ngIf="!llbService.isLiveData() || llbService.data[0]?.epv === 'na' || llbService.data[0]?.epv === 'NaN'"><n-a></n-a></span>
				<span *ngIf="llbService.isLiveData() && llbService.data[0]?.epv !== 'na' && llbService.data[0]?.epv !== 'NaN'">{{llbService.data[0]?.epv}}m</span>
			</li>
			<li>
				<span>NMEA mode: </span>
				<span *ngIf="!llbService.isLiveData() || getNmeaMode() === 'unknown'"><n-a></n-a></span>
				<span *ngIf="llbService.isLiveData() && getNmeaMode() !== 'unknown'">{{getNmeaMode()}}</span>
			</li>
			<li><br></li>
			<li>
				<span>Course over true north: </span>
				<span *ngIf="!llbService.isLiveData() || llbService.data[0]?.trc === 'na' || llbService.data[0]?.trc === 'NaN'"><n-a></n-a></span>
				<div *ngIf="llbService.isLiveData() && llbService.data[0]?.trc !== 'na' && llbService.data[0]?.trc !== 'NaN'">
					<span>{{llbService.data[0]?.trc | number : '1.1-1'}}Â°</span>
					<br>
					<img id="compass" src="../../assets/img/compass.png">
				</div>
			</li>
		</ul>
	</div>
</div>

